apiVersion: scaffolder.backstage.io/v1beta3
kind: Template
metadata:
  name: dot-github-template
  title: dot-github
  description: Create and Manage GitHub repositories
spec:
  owner: vfarcic/crossplanme-gh
  type: service
  parameters:
    - title: General Info 222
      required:
        - public
        - registry
      properties:
        public:
          type: string # FIXME: boolean
          default: "true"
          pattern: '^(true|false)*$'
        registry:
          type: string
          default: ttl.sh
        app:
          type: object
          properties:
            language:
              type: string # FIXME: array
              default: go
              pattern: '^(go|js)*$'
            host:
              type: string
              default: my-repo.acme.com
            namespace:
              type: string
              default: a-team
    - title: DB
      required:
        - dbEnabled
        - dbProvider
        - dbNamespace
      properties:
        dbEnabled:
          type: string # FIXME: boolean
          default: "true"
          pattern: '^(true|false)*$'
        dbProvider:
          type: string
          default: aws # FIXME: array
          pattern: '^(aws|azure|google)*$'
        dbNamespace:
          type: string
          default: a-team # FIXME: array from Kubernetes
    - title: Repo
      required:
        - repoUser
      properties:
        repoUser:
          type: string
          default: vfarcic
    - title: GitOps
    - title: Repo
      required:
        - gitOpsEnabled
        - gitOpsUser
        - gitOpsRepo
      properties:
        gitOpsEnabled:
          type: string
          default: "true"
        gitOpsUser:
          type: string
          default: vfarcic
        gitOpsRepo:
          type: string
          default: crossplane-gh
  steps:
    - id: log-message
      name: Log Message
      action: debug:log
      input:
        message: 'Hello, ${{ parameters.name }}!'